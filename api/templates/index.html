<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{.Title}}</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; }
      header { margin-bottom: 1rem; }
      .card { border: 1px solid #e3e3e3; border-radius: 8px; padding: 1rem; max-width: 720px; }
      .muted { color: #666; }
    </style>
  </head>
  <body>
    <header>
      <h1>{{.Title}}</h1>
      <p class="muted">Scan an English Wikipedia page for external links and Wayback coverage.</p>
    </header>
    <main>
      <section class="card">
        <p>{{.Message}}</p>
        <form method="GET" action="/">
          <label for="page"><b>Wikipedia page title</b></label><br>
          <input id="page" name="page" type="text" placeholder="Albert Einstein" style="width: 420px;" value="{{.Query}}">
          <button type="submit">Scan</button>
        </form>
        {{if .Error}}
        <p style="color:#b00;">Error: {{.Error}}</p>
        {{end}}
      </section>
      {{if .Results}}
      <section style="margin-top:1rem;" class="card">
        <h3>Results (showing up to 50 links)</h3>
        <table style="border-collapse: collapse; width: 100%;">
          <thead>
            <tr>
              <th style="text-align:left; border-bottom:1px solid #ddd; padding:6px;">URL</th>
              <th style="text-align:left; border-bottom:1px solid #ddd; padding:6px;">Live</th>
              <th style="text-align:left; border-bottom:1px solid #ddd; padding:6px;">Wayback</th>
            </tr>
          </thead>
          <tbody>
            {{range .Results}}
            <tr>
              <td style="vertical-align:top; padding:6px; max-width:480px;">
                <a href="{{.URL}}" target="_blank" rel="noreferrer noopener">{{.URL}}</a>
              </td>
              <td style="vertical-align:top; padding:6px; white-space:nowrap;">
                {{.LiveStatus}}
              </td>
              <td style="vertical-align:top; padding:6px;">
                {{if .Archived}}
                  <a href="{{.ArchiveURL}}" target="_blank" rel="noreferrer noopener">archived</a> ({{.ArchiveStatus}})
                {{else}}
                  not archived
                {{end}}
              </td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </section>
      {{end}}
    </main>
  </body>
  </html>
